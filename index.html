<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" href="./styles.css">
    <title>Document</title>
</head>
<body>
  <div id="container">
  <h3>Enter a City to get the weather for that city</h3>
    <form id="user-form" class="card-body">
        
        <input name="city" id="city" type="text" autofocus="true" class="form-input" />
        <button type="submit" class="btn">Get city</button>
      </form>
  </div>
  <div id="displayWeather">
    <h4>test</h4>
  </div>
</body>

<script>
var nameInputEl = document.querySelector("#inputField");
var url = "api.openweathermap.org/data/2.5/weather?q="+ nameInputEl+"&appid=de9be8a62e91f54477dfa886a78cb6ec";


var getCity = function(city){
    //format the github api url
    var apiUrl = "https://api.openweathermap.org/data/2.5/weather?q="+ city +"&appid=de9be8a62e91f54477dfa886a78cb6ec&units=imperial";
    //make a request to the url
    fetch(apiUrl)
    .then(function(response) {
      // request was successful
      if (response.ok) {
        response.json().then(function(data) {
          displayCity(data, city);
        });
      } else {
        alert("Error: " + response.statusText);
      }
    })
    .catch(function(error) {
      // Notice this `.catch()` getting chained onto the end of the `.then()` method
      alert("Unable to connect");
    });
};

var userFormEl = document.querySelector("#user-form");
var nameInputEl = document.querySelector("#city");

var formSubmitHandler = function(event) {
    event.preventDefault();
    // get value from input element
var city = nameInputEl.value.trim();

if (city) {
  getCity(city);
  nameInputEl.value = "";
} else {
  alert("Please enter a city");
}
    console.log(event);
  };

  userFormEl.addEventListener("submit", formSubmitHandler);

  var displayCity = function(data, city) {
    console.log(city);
    console.log(data);
  
    var weather = document.querySelector("#displayWeather");
    weather.createElement="div";
    weather.innerHTML = "<p>" + city + "</p><p>"+JSON.stringify(data.main)+"</p>" ;
  };
</script>
</html>